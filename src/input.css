@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
      --night-deep: #050914;
      --night-mid: #0b1640;
      --night-soft: #1b2d63;
      --mist-lilac: rgba(149, 132, 228, 0.12);
      --mist-cyan: rgba(128, 188, 255, 0.1);
      --star-main: #f7fbff;
      --leaf-main: #2ea357;
      --leaf-shadow: #1f723f;
      --sun-gold: #ffd451;
      --sun-amber: #f2a71a;
      --sun-core-dark: #5f3516;
      --daisy-ivory: #fbfdff;
      --daisy-snow: #edf3ff;
      --daisy-core: #f4bb2a;
      --glow-warm: rgba(255, 221, 120, 0.65);
      --glow-cool: rgba(198, 230, 255, 0.62);
    }

    html,
    body {
      width: 100%;
      min-height: 100%;
    }

    body {
      margin: 0;
      overflow-x: hidden;
      overflow-y: auto;
      color: #f5f7ff;
      font-family: "Garamond", "Palatino Linotype", "Book Antiqua", serif;
      background: linear-gradient(180deg, var(--night-soft) 0%, var(--night-mid) 42%, var(--night-deep) 92%);
    }

    .scene-root {
      position: relative;
      width: 100%;
      min-height: 100svh;
      overflow-x: hidden;
      overflow-y: visible;
      padding: clamp(4.2rem, 8vh, 5.8rem) 0 clamp(4.2rem, 9vh, 6rem);
      display: flex;
      align-items: center;
      justify-content: center;
      perspective: 900px;
    }

    #sky-layer {
      position: absolute;
      inset: 0;
      z-index: 0;
      background:
        radial-gradient(circle at 18% 14%, rgba(132, 164, 250, 0.2), transparent 36%),
        radial-gradient(circle at 78% 8%, rgba(156, 205, 255, 0.12), transparent 34%),
        linear-gradient(180deg, rgba(15, 34, 80, 0.1), rgba(0, 0, 0, 0.32));
    }

    #sky-layer::before {
      content: "";
      position: absolute;
      inset: 0;
      background:
        radial-gradient(ellipse at 50% 110%, rgba(255, 255, 255, 0.04), transparent 56%),
        radial-gradient(ellipse at 50% 0%, rgba(255, 255, 255, 0.03), transparent 70%);
      pointer-events: none;
      z-index: 1;
    }

    #nebula-layer {
      position: absolute;
      inset: -8% -10%;
      pointer-events: none;
      background:
        radial-gradient(circle at 24% 24%, var(--mist-cyan), transparent 34%),
        radial-gradient(circle at 72% 22%, var(--mist-lilac), transparent 36%),
        radial-gradient(circle at 54% 65%, rgba(164, 152, 255, 0.07), transparent 40%);
      mix-blend-mode: screen;
      filter: blur(18px);
      animation: hazeFloat 16s ease-in-out infinite alternate;
      z-index: 12;
    }

    #vignette-layer {
      position: absolute;
      inset: 0;
      pointer-events: none;
      background: radial-gradient(circle at center, transparent 52%, rgba(1, 2, 8, 0.56) 100%);
      z-index: 13;
    }

    #stars-layer {
      position: absolute;
      inset: 0;
      z-index: 14;
      pointer-events: none;
    }

    #stars-layer .star {
      position: absolute;
      border-radius: 999px;
      background: var(--star-main);
      opacity: var(--star-opacity, 0.7);
      box-shadow: 0 0 10px rgba(239, 250, 255, 0.42);
      animation:
        twinkle var(--twinkle-duration, 5.2s) ease-in-out infinite,
        starDrift var(--star-drift-duration, 14s) ease-in-out infinite alternate;
      will-change: transform, opacity;
    }

    #stars-layer .star.bright {
      box-shadow: 0 0 15px rgba(219, 243, 255, 0.8);
    }

    #meteor-container {
      position: absolute;
      inset: 0;
      overflow: hidden;
      pointer-events: none;
      z-index: 18;
    }

    .meteor {
      position: absolute;
      height: var(--meteor-thickness, 2px);
      width: var(--meteor-width, 180px);
      border-radius: 999px;
      background: linear-gradient(
        90deg,
        rgba(255, 255, 255, 0),
        rgba(255, 255, 255, 0.9) 40%,
        rgba(174, 219, 255, 0.45)
      );
      transform: rotate(var(--meteor-rotation, 45deg));
      transform-origin: left center;
      filter: drop-shadow(0 0 9px rgba(169, 212, 255, 0.8));
      animation: meteorFly var(--meteor-duration, 1200ms) cubic-bezier(0.2, 0.01, 0.16, 1) forwards;
      pointer-events: none;
      will-change: transform, opacity;
    }

    .meteor::after {
      content: "";
      position: absolute;
      right: -2px;
      top: 50%;
      width: 5px;
      height: 5px;
      border-radius: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.9);
      box-shadow: 0 0 8px rgba(196, 233, 255, 0.95);
    }

    .verse {
      position: fixed;
      top: 1.25rem;
      right: 1.25rem;
      z-index: 40;
      margin: 0;
      font-size: 0.82rem;
      letter-spacing: 0.05em;
      color: rgba(241, 245, 255, 0.9);
      text-shadow: 0 0 7px rgba(220, 233, 255, 0.6);
    }

    .promise-banner {
      position: fixed;
      top: clamp(0.7rem, 3vh, 1.85rem);
      left: 50%;
      z-index: 39;
      width: min(88vw, 840px);
      transform: translateX(-50%);
      pointer-events: none;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .promise-quote {
      margin: 0;
      width: 100%;
      min-height: clamp(2.3rem, 5vw, 3.1rem);
      padding: 0.46rem 1rem;
      border-radius: 999px;
      border: 1px solid rgba(232, 239, 255, 0.35);
      background: linear-gradient(165deg, rgba(255, 255, 255, 0.2), rgba(170, 197, 255, 0.08));
      box-shadow:
        0 8px 20px rgba(7, 20, 54, 0.28),
        inset 0 0 16px rgba(255, 255, 255, 0.08);
      color: rgba(241, 246, 255, 0.94);
      font-size: clamp(0.7rem, 1.26vw, 0.93rem);
      line-height: 1.35;
      letter-spacing: 0.01em;
      text-align: center;
      text-shadow: 0 0 9px rgba(215, 230, 255, 0.38);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      animation: promiseGlow 6.4s ease-in-out infinite;
    }

    .promise-banner.is-popping .promise-quote {
      animation:
        promiseGlow 6.4s ease-in-out infinite,
        promisePop 920ms cubic-bezier(0.2, 0.76, 0.28, 1);
    }

    .promise-quote::after {
      content: "";
      display: inline-block;
      vertical-align: -1px;
      margin-left: 3px;
      width: 1px;
      height: 0.96em;
      background: rgba(239, 246, 255, 0.75);
      box-shadow: 0 0 8px rgba(223, 237, 255, 0.42);
      animation: promiseCaret 900ms steps(1, end) infinite;
    }

    .scene-content {
      position: relative;
      z-index: 30;
      width: 100%;
      max-width: 860px;
      padding: 0 1rem;
      text-align: center;
      transform: translateZ(0);
      animation: sceneBreathe 10s ease-in-out infinite;
    }

    .romantic-line {
      margin: 0 0 1.75rem;
      font-size: clamp(1rem, 2.7vw, 1.35rem);
      letter-spacing: 0.03em;
      color: rgba(241, 245, 255, 0.9);
      text-shadow: 0 2px 18px rgba(125, 171, 255, 0.25);
    }

    .flowers-shell {
      position: relative;
      width: fit-content;
      margin: 0 auto;
      padding-bottom: 0.4rem;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      gap: clamp(0.9rem, 2.2vw, 2.6rem);
      transition: filter 0.42s ease;
    }

    .flowers-shell::before {
      content: "";
      position: absolute;
      left: 50%;
      bottom: 2%;
      width: clamp(220px, 52vw, 370px);
      height: 48px;
      transform: translateX(-50%);
      background: radial-gradient(ellipse at center, rgba(188, 230, 255, 0.18), transparent 68%);
      filter: blur(8px);
      animation: groundGlow 4.6s ease-in-out infinite;
      pointer-events: none;
    }

    .flowers-shell.glow-boost {
      filter: drop-shadow(0 0 16px var(--glow-warm)) drop-shadow(0 0 18px var(--glow-cool));
      animation: glowPulse 1.5s ease-in-out 1;
    }

    .sparkle-container {
      position: absolute;
      inset: -14% -10% 2% -10%;
      pointer-events: none;
      overflow: visible;
      z-index: 10;
    }

    .shiny-particle {
      position: absolute;
      border-radius: 50%;
      background: radial-gradient(circle at 35% 35%, rgba(255, 255, 255, 0.98), rgba(255, 244, 190, 0.66) 58%, rgba(255, 244, 190, 0));
      box-shadow:
        0 0 8px rgba(255, 242, 186, 0.82),
        0 0 16px rgba(199, 233, 255, 0.42);
      mix-blend-mode: screen;
      animation: shiny-rise var(--sparkle-duration, 2000ms) ease-out forwards;
      will-change: transform, opacity;
    }

    .shiny-particle::after {
      content: "";
      position: absolute;
      left: 50%;
      top: 50%;
      width: 220%;
      height: 1.1px;
      transform: translate(-50%, -50%) rotate(32deg);
      background: linear-gradient(90deg, rgba(255, 255, 255, 0), rgba(255, 251, 231, 0.72), rgba(255, 255, 255, 0));
      opacity: 0.78;
    }

    .botanical-floor {
      position: absolute;
      left: 50%;
      bottom: -4px;
      width: clamp(240px, 58vw, 420px);
      height: 98px;
      transform: translateX(-50%);
      pointer-events: none;
      z-index: 1;
      overflow: visible;
    }

    .botanical-floor::before {
      content: "";
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      height: 38px;
      border-radius: 50% 50% 32% 32%;
      background:
        radial-gradient(ellipse at 50% 100%, rgba(20, 64, 37, 0.7), transparent 72%),
        linear-gradient(180deg, rgba(64, 150, 92, 0.28), rgba(19, 58, 34, 0.52));
      opacity: 0.95;
      z-index: 0;
    }

    .botanical-floor::after {
      content: "";
      position: absolute;
      left: 50%;
      bottom: 6px;
      width: 84%;
      height: 16px;
      transform: translateX(-50%);
      background: radial-gradient(ellipse at center, rgba(167, 236, 179, 0.22), transparent 74%);
      filter: blur(3px);
      opacity: 0.7;
      z-index: 0;
    }

    .frond {
      position: absolute;
      left: var(--fx, 50%);
      bottom: 12px;
      width: var(--fw, 72px);
      height: var(--fh, 30px);
      border-radius: 100% 0 100% 0 / 72% 0 100% 28%;
      background: linear-gradient(150deg, rgba(114, 224, 229, 0.72), rgba(46, 153, 169, 0.72) 58%, rgba(21, 89, 104, 0.7) 100%);
      box-shadow: inset -2px -2px 3px rgba(8, 42, 49, 0.35), 0 2px 4px rgba(0, 0, 0, 0.2);
      transform-origin: 12% 90%;
      transform: rotate(var(--fa, 0deg)) scaleX(var(--ff, 1));
      opacity: 0.75;
      filter: saturate(0.9);
      animation:
        frond-grow 1.12s ease-out var(--fd, 0s) backwards,
        frond-wind 7.2s ease-in-out calc(var(--fd, 0s) + 1.2s) infinite;
      z-index: 1;
    }

    .frond::after {
      content: "";
      position: absolute;
      left: 50%;
      top: 10%;
      width: 1.2px;
      height: 80%;
      border-radius: 999px;
      transform: translateX(-50%);
      background: linear-gradient(180deg, rgba(205, 255, 250, 0.5), rgba(27, 89, 102, 0.12));
      opacity: 0.75;
    }

    .base-leaf {
      position: absolute;
      bottom: 9px;
      width: 66px;
      height: 28px;
      border-radius: 100% 0 100% 0 / 70% 0 100% 30%;
      background: linear-gradient(145deg, #53c575, #2f8d53 58%, #23643d 100%);
      box-shadow: inset -2px -2px 3px rgba(11, 42, 22, 0.36), 0 3px 5px rgba(0, 0, 0, 0.22);
      transform-origin: 12% 90%;
      --leaf-angle: 0deg;
      --leaf-flip: 1;
      --leaf-delay: 0s;
      transform: rotate(var(--leaf-angle)) scaleX(var(--leaf-flip));
      animation:
        leaf-ground-breathe 4.6s ease-in-out var(--leaf-delay) infinite,
        leaf-ground-sway 7.2s ease-in-out calc(var(--leaf-delay) + 1.05s) infinite;
      z-index: 2;
    }

    .base-leaf::after {
      content: "";
      position: absolute;
      left: 50%;
      top: 8%;
      width: 1.5px;
      height: 80%;
      border-radius: 999px;
      transform: translateX(-50%);
      background: linear-gradient(180deg, rgba(221, 255, 226, 0.5), rgba(20, 71, 40, 0.22));
    }

    .base-leaf::before {
      content: "";
      position: absolute;
      left: 18%;
      top: 22%;
      width: 56%;
      height: 38%;
      border-radius: 100% 0 100% 0;
      transform: rotate(-8deg);
      background: linear-gradient(180deg, rgba(210, 255, 220, 0.26), rgba(210, 255, 220, 0));
      opacity: 0.75;
    }

    .base-leaf--1 {
      left: 8%;
      --leaf-angle: -20deg;
      --leaf-delay: 0.15s;
    }

    .base-leaf--2 {
      left: 22%;
      width: 72px;
      --leaf-angle: -6deg;
      --leaf-delay: 0.6s;
    }

    .base-leaf--3 {
      left: 38%;
      width: 76px;
      height: 30px;
      --leaf-angle: -1deg;
      --leaf-delay: 1.1s;
    }

    .base-leaf--4 {
      left: 52%;
      width: 74px;
      height: 30px;
      --leaf-angle: 4deg;
      --leaf-flip: -1;
      --leaf-delay: 0.8s;
    }

    .base-leaf--5 {
      right: 18%;
      width: 68px;
      --leaf-angle: 10deg;
      --leaf-flip: -1;
      --leaf-delay: 0.3s;
    }

    .base-leaf--6 {
      right: 4%;
      width: 64px;
      --leaf-angle: 22deg;
      --leaf-flip: -1;
      --leaf-delay: 1.4s;
    }

    .mini-grass {
      position: absolute;
      left: var(--x, 0%);
      bottom: 7px;
      width: var(--w, 4px);
      height: var(--h, 30px);
      border-radius: 999px 999px 0 0;
      background: linear-gradient(180deg, #8aeca7 0%, #6ac985 26%, #439f64 64%, #275f3b 100%);
      box-shadow: inset -1px 0 0 rgba(0, 0, 0, 0.24), 0 1px 2px rgba(0, 0, 0, 0.2);
      clip-path: polygon(50% 0, 92% 16%, 100% 70%, 78% 100%, 22% 100%, 0 70%, 8% 16%);
      transform-origin: bottom center;
      transform: rotate(var(--r, 0deg));
      animation:
        grass-grow 1.1s ease-out var(--d, 0s) backwards,
        grass-wind 7.2s ease-in-out calc(var(--d, 0s) + 1.2s) infinite;
      opacity: var(--o, 0.96);
      z-index: 3;
    }

    .mini-grass--tall {
      width: calc(var(--w, 4px) * 0.88);
      filter: saturate(1.08) brightness(1.08);
    }

    .mini-grass--short {
      width: calc(var(--w, 4px) * 1.08);
      opacity: calc(var(--o, 0.96) * 0.9);
      filter: saturate(0.96) brightness(0.95);
    }

    .mini-grass::before {
      content: "";
      position: absolute;
      bottom: 0;
      left: -62%;
      width: 72%;
      height: 72%;
      border-radius: 999px 999px 0 0;
      background: linear-gradient(180deg, rgba(134, 235, 161, 0.86), rgba(41, 119, 69, 0.9));
      clip-path: polygon(50% 0, 92% 16%, 100% 70%, 78% 100%, 22% 100%, 0 70%, 8% 16%);
      transform: rotate(-11deg);
      opacity: 0.72;
    }

    .mini-grass::after {
      content: "";
      position: absolute;
      left: 50%;
      top: 12%;
      width: 1px;
      height: 78%;
      border-radius: 999px;
      transform: translateX(-50%);
      background: linear-gradient(180deg, rgba(228, 255, 233, 0.42), rgba(31, 94, 54, 0.2));
    }

    .mini-grass:nth-child(odd) {
      filter: saturate(1.05);
    }

    .mini-grass:nth-child(3n) {
      filter: brightness(1.08);
    }

    .mini-grass.mini-grass--tall {
      width: calc(var(--w, 4px) * 0.88);
      filter: saturate(1.08) brightness(1.08);
    }

    .mini-grass.mini-grass--short {
      width: calc(var(--w, 4px) * 1.08);
      opacity: calc(var(--o, 0.96) * 0.9);
      filter: saturate(0.96) brightness(0.95);
    }

    .grass-filler {
      position: absolute;
      left: var(--x, 50%);
      bottom: 8px;
      width: var(--fw, 10px);
      height: var(--fh, 18px);
      transform-origin: 50% 100%;
      transform: rotate(var(--fr, 0deg));
      opacity: var(--fo, 0.84);
      animation:
        filler-grow 1.05s ease-out var(--fd, 0s) backwards,
        filler-sway 6.8s ease-in-out calc(var(--fd, 0s) + 1.1s) infinite;
      filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.14));
      z-index: 2;
    }

    .grass-filler::before,
    .grass-filler::after {
      content: "";
      position: absolute;
      bottom: 0;
      border-radius: 999px 999px 0 0;
      clip-path: polygon(50% 0, 95% 15%, 100% 72%, 76% 100%, 24% 100%, 0 72%, 5% 15%);
      background: linear-gradient(180deg, rgba(150, 241, 170, 0.9), rgba(66, 161, 95, 0.9) 62%, rgba(32, 92, 55, 0.94));
      box-shadow: inset -1px 0 0 rgba(0, 0, 0, 0.14);
    }

    .grass-filler::before {
      left: 6%;
      width: 50%;
      height: 100%;
      transform-origin: bottom center;
      transform: rotate(-18deg);
    }

    .grass-filler::after {
      right: 4%;
      width: 46%;
      height: 86%;
      transform-origin: bottom center;
      transform: rotate(17deg);
      opacity: 0.92;
    }

    /* Flower motion language adapted from Redemple332/Flowers-HTML-CSS */
    .flower {
      position: relative;
      width: clamp(122px, 18.5vw, 165px);
      height: clamp(220px, 38vh, 322px);
      transform-origin: bottom center;
      --fl-speed: 0.82s;
      filter: drop-shadow(0 10px 10px rgba(10, 22, 36, 0.35));
      z-index: 3;
      will-change: transform;
    }

    .flower .stem,
    .flower__line {
      position: absolute;
      left: 50%;
      bottom: 0;
      width: 11px;
      height: 70%;
      margin-left: -5.5px;
      border-radius: 999px;
      background: linear-gradient(180deg, #52cd77 0%, #369e57 44%, #2a8349 68%, #1f6739 100%);
      box-shadow: inset -2px 0 0 rgba(0, 0, 0, 0.2), inset 2px 0 0 rgba(255, 255, 255, 0.08);
      animation: grow-flower-tree 1.28s cubic-bezier(0.24, 0.88, 0.32, 1) var(--stem-delay, 0s) backwards;
      overflow: visible;
    }

    .flower__line::before {
      content: "";
      position: absolute;
      left: 2px;
      top: 8%;
      width: 2px;
      height: 82%;
      border-radius: 999px;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.35), rgba(255, 255, 255, 0));
      opacity: 0.55;
    }

    .flower__line::after {
      content: "";
      position: absolute;
      right: 1px;
      top: 16%;
      width: 1px;
      height: 70%;
      border-radius: 999px;
      background: rgba(18, 56, 32, 0.45);
      opacity: 0.7;
    }

    .flower__line__leaf {
      position: absolute;
      width: 40px;
      height: 20px;
      border-radius: 100% 0 100% 0;
      background: linear-gradient(135deg, var(--leaf-main), var(--leaf-shadow));
      box-shadow: inset -1px -2px 3px rgba(0, 0, 0, 0.18), 0 1px 2px rgba(0, 0, 0, 0.1);
      opacity: 0.92;
    }

    .flower__line__leaf::after {
      content: "";
      position: absolute;
      left: 50%;
      top: 8%;
      width: 1.4px;
      height: 80%;
      border-radius: 999px;
      transform: translateX(-50%);
      background: linear-gradient(180deg, rgba(225, 255, 232, 0.5), rgba(39, 107, 59, 0.2));
    }

    .flower__line__leaf--1 {
      left: -34px;
      top: 16%;
      transform: rotate(-34deg);
      animation: blooming-leaf-left var(--fl-speed) calc(var(--stem-delay, 0s) + 0.8s) backwards;
    }

    .flower__line__leaf--2 {
      left: 5px;
      top: 30%;
      border-radius: 0 100% 0 100%;
      transform: rotate(30deg);
      animation: blooming-leaf-right var(--fl-speed) calc(var(--stem-delay, 0s) + 1s) backwards;
    }

    .flower__line__leaf--3 {
      left: -31px;
      top: 47%;
      transform: rotate(-28deg);
      animation: blooming-leaf-left var(--fl-speed) calc(var(--stem-delay, 0s) + 1.2s) backwards;
    }

    .flower__line__leaf--4 {
      left: 4px;
      top: 61%;
      border-radius: 0 100% 0 100%;
      transform: rotate(26deg);
      animation: blooming-leaf-right var(--fl-speed) calc(var(--stem-delay, 0s) + 1.4s) backwards;
    }

    .flower .bloom,
    .flower__leafs {
      position: absolute;
      left: 50%;
      top: 4%;
      width: var(--bloom-size, 116px);
      height: var(--bloom-size, 116px);
      margin-left: calc(var(--bloom-size, 116px) / -2);
      transform-origin: 50% 55%;
      animation: blooming-flower 0.95s cubic-bezier(0.16, 0.86, 0.22, 1.12) var(--bloom-delay, 1.06s) backwards;
    }

    .flower .petal {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%)
        rotate(calc(var(--i) * var(--petal-angle, 22.5deg)))
        translateY(calc(-1 * var(--petal-distance, 46px)));
      transform-origin: center center;
      animation:
        petalPulse 4.2s ease-in-out calc(var(--bloom-delay, 1s) + 0.6s) infinite,
        petal-wind-sync 7.2s ease-in-out calc(var(--bloom-delay, 1s) + 0.7s) infinite;
      overflow: hidden;
      position: absolute;
    }

    .flower .petal::before {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: inherit;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.34), rgba(0, 0, 0, 0.12));
      mix-blend-mode: soft-light;
      opacity: 0.55;
      pointer-events: none;
    }

    .flower .petal::after {
      content: "";
      position: absolute;
      left: 50%;
      top: 12%;
      width: 1.6px;
      height: 72%;
      transform: translateX(-50%);
      border-radius: 999px;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.45), rgba(0, 0, 0, 0.14));
      opacity: 0.35;
      pointer-events: none;
    }

    .flower .center {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      border-radius: 50%;
      aspect-ratio: 1 / 1;
      z-index: 8;
    }

    .flower__light {
      position: absolute;
      left: 50%;
      bottom: 18%;
      width: 6px;
      height: 6px;
      margin-left: -3px;
      border-radius: 50%;
      background: rgba(255, 240, 180, 0.95);
      box-shadow: 0 0 12px rgba(255, 235, 157, 0.75);
      filter: blur(0.3px);
      opacity: 0;
      animation: light-ans 4.2s linear infinite;
      animation-delay: calc(var(--bloom-delay, 1s) + 0.3s);
      z-index: 1;
      pointer-events: none;
    }

    .flower__light--1 {
      left: 28%;
      animation-duration: 3.8s;
    }

    .flower__light--2 {
      left: 42%;
      animation-duration: 4.1s;
      animation-delay: calc(var(--bloom-delay, 1s) + 0.6s);
    }

    .flower__light--3 {
      left: 58%;
      animation-duration: 3.6s;
      animation-delay: calc(var(--bloom-delay, 1s) + 0.15s);
    }

    .flower__light--4 {
      left: 71%;
      animation-duration: 4.3s;
      animation-delay: calc(var(--bloom-delay, 1s) + 0.45s);
    }

    .flower__light--5 {
      left: 36%;
      animation-duration: 3.9s;
      animation-delay: calc(var(--bloom-delay, 1s) + 0.9s);
    }

    .flower__light--6 {
      left: 64%;
      animation-duration: 4.4s;
      animation-delay: calc(var(--bloom-delay, 1s) + 1.1s);
    }

    .sunflower {
      --stem-delay: 0s;
      --bloom-delay: 1.02s;
      --bloom-size: 128px;
      --petal-angle: 22.5deg;
      --petal-distance: 60px;
      animation: moving-flower-1 7.2s ease-in-out calc(var(--bloom-delay) + 0.7s) infinite;
    }

    .sunflower .bloom::before {
      content: "";
      position: absolute;
      inset: 15px;
      border-radius: 50%;
      background: radial-gradient(circle at center, rgba(255, 184, 72, 0.22), transparent 70%);
      z-index: 1;
    }

    .sunflower .bloom::after {
      content: "";
      position: absolute;
      inset: 22px;
      border-radius: 50%;
      box-shadow: inset 0 6px 8px rgba(255, 185, 77, 0.2), 0 -4px 6px rgba(0, 0, 0, 0.14);
      z-index: 3;
      pointer-events: none;
    }

    .sunflower .petal {
      width: 23px;
      height: 66px;
      border-radius: 56% 44% 58% 42% / 68% 68% 32% 32%;
      background: linear-gradient(180deg, #ffe071 0%, var(--sun-gold) 36%, #f6ba31 78%, #d98e17 100%);
      box-shadow: 0 2px 6px rgba(67, 38, 8, 0.22), 0 0 7px rgba(255, 208, 84, 0.42);
      z-index: 2;
    }

    .sunflower .center {
      width: 54px;
      height: 54px;
      background:
        repeating-radial-gradient(
          circle at 50% 50%,
          rgba(255, 219, 159, 0.16) 0 1.7px,
          rgba(79, 39, 13, 0.2) 1.7px 3.3px
        ),
        radial-gradient(circle at 50% 50%, #8d572b 0%, #6f3f1d 52%, var(--sun-core-dark) 100%);
      box-shadow: inset -2px -2px 5px rgba(0, 0, 0, 0.35), inset 2px 2px 3px rgba(255, 214, 144, 0.15),
        0 0 10px rgba(255, 173, 67, 0.26);
      overflow: hidden;
    }

    .sunflower .center::before {
      content: "";
      position: absolute;
      inset: 5px;
      border-radius: 50%;
      background: repeating-radial-gradient(
        circle at center,
        rgba(255, 223, 157, 0.16) 0 1.3px,
        rgba(45, 22, 7, 0.18) 1.3px 2.8px
      );
      opacity: 0.7;
      mix-blend-mode: soft-light;
    }

    .sunflower .center::after {
      content: "";
      position: absolute;
      inset: 14px;
      border-radius: 50%;
      background: radial-gradient(circle at 50% 50%, rgba(255, 211, 133, 0.45), rgba(89, 49, 21, 0.2) 75%);
      opacity: 0.65;
    }

    .daisy {
      --stem-delay: 0.58s;
      --bloom-delay: 1.6s;
      --bloom-size: 112px;
      --petal-angle: 22.5deg;
      --petal-distance: 50px;
      animation: moving-flower-2 7.2s ease-in-out calc(var(--bloom-delay) + 0.7s) infinite;
    }

    .daisy .petal {
      width: 14px;
      height: 60px;
      border-radius: 52% 48% 58% 42% / 72% 72% 28% 28%;
      background: linear-gradient(180deg, #ffffff 0%, var(--daisy-ivory) 48%, var(--daisy-snow) 100%);
      box-shadow: 0 1px 5px rgba(48, 55, 78, 0.18), 0 0 7px rgba(255, 255, 255, 0.44);
      z-index: 2;
    }

    .daisy .center {
      width: 40px;
      height: 40px;
      background:
        repeating-radial-gradient(
          circle at 50% 50%,
          rgba(255, 231, 145, 0.24) 0 1.8px,
          rgba(212, 145, 22, 0.2) 1.8px 3.6px
        ),
        radial-gradient(circle at 50% 50%, #ffe791 0%, var(--daisy-core) 64%, #cf8f18 100%);
      box-shadow: inset -1px -1px 2px rgba(0, 0, 0, 0.24), inset 1px 1px 2px rgba(255, 236, 168, 0.3),
        0 0 10px rgba(255, 215, 120, 0.28);
      overflow: hidden;
    }

    .daisy .center::after {
      content: "";
      position: absolute;
      inset: 10px;
      border-radius: 50%;
      background: radial-gradient(circle at center, rgba(255, 240, 176, 0.5), rgba(200, 134, 24, 0.18));
      opacity: 0.6;
    }

    .button-wrap {
      position: relative;
      margin-top: 2.5rem;
    }

    #missed-btn {
      border: 1px solid rgba(241, 245, 255, 0.45);
      border-radius: 999px;
      padding: 0.62rem 1.5rem;
      font-size: clamp(0.92rem, 1.85vw, 1.08rem);
      color: #f8faff;
      background: linear-gradient(120deg, rgba(255, 255, 255, 0.2), rgba(221, 235, 255, 0.12));
      box-shadow: 0 0 22px rgba(168, 200, 255, 0.25), inset 0 0 18px rgba(255, 255, 255, 0.06);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      cursor: pointer;
      transition: transform 220ms ease, box-shadow 220ms ease, background 220ms ease;
    }

    #missed-btn:hover {
      background: linear-gradient(120deg, rgba(255, 255, 255, 0.24), rgba(221, 235, 255, 0.18));
      box-shadow: 0 0 24px rgba(194, 221, 255, 0.42), inset 0 0 20px rgba(255, 255, 255, 0.14);
      transform: translateY(-1px);
    }

    #missed-btn:active {
      transform: scale(0.98);
    }

    #message-bubble {
      position: absolute;
      left: 50%;
      top: -0.3rem;
      min-width: 220px;
      padding: 0.5rem 1rem;
      border-radius: 1rem;
      font-size: 0.92rem;
      color: #f1f6ff;
      border: 1px solid rgba(255, 255, 255, 0.36);
      background: linear-gradient(160deg, rgba(255, 255, 255, 0.24), rgba(200, 218, 255, 0.08));
      box-shadow: 0 12px 30px rgba(13, 23, 54, 0.42);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      opacity: 0;
      transform: translate(-50%, 12px) scale(0.95);
      pointer-events: none;
    }

    #message-bubble.show {
      animation: bubbleFloat 2.5s ease forwards;
    }

    .lyrics-panel {
      position: absolute;
      left: 50%;
      bottom: 2.75rem;
      width: min(90vw, 760px);
      height: 3.75rem;
      transform: translateX(-50%);
      pointer-events: none;
      z-index: 38;
    }

    .lyrics-track {
      position: relative;
      width: 100%;
      height: 100%;
      overflow: hidden;
      border-radius: 0.9rem;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.11), rgba(170, 199, 255, 0.04));
      box-shadow:
        inset 0 0 14px rgba(255, 255, 255, 0.05),
        0 8px 16px rgba(4, 12, 32, 0.24);
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
    }

    .lyric-line {
      position: absolute;
      top: 50%;
      left: 50%;
      width: min(94%, 700px);
      margin: 0;
      text-align: center;
      font-size: clamp(0.96rem, 2.05vw, 1.28rem);
      line-height: 1.4;
      letter-spacing: 0.015em;
      color: rgba(239, 246, 255, 0.95);
      text-shadow: 0 0 10px rgba(196, 223, 255, 0.4);
      transform: translate(-50%, -50%);
      will-change: transform, opacity;
    }

    .lyric-active {
      opacity: 1;
    }

    .lyric-active.line-in {
      animation: lyricActiveIn 520ms ease-out;
    }

    .lyric-prev {
      opacity: 0;
    }

    .lyric-prev.rise-out {
      animation: lyricRiseOut 860ms cubic-bezier(0.2, 0.76, 0.24, 1) forwards;
    }


    .footer-sign {
      position: absolute;
      left: 50%;
      bottom: 1rem;
      transform: translateX(-50%);
      z-index: 40;
      margin: 0;
      font-size: 0.9rem;
      letter-spacing: 0.3em;
      color: rgba(226, 232, 245, 0.65);
    }

    @media (max-width: 900px) {
      .scene-content {
        max-width: 680px;
      }

      .flowers-shell {
        gap: clamp(0.72rem, 2vw, 1.5rem);
      }

      .botanical-floor {
        width: clamp(230px, 64vw, 360px);
      }
    }

    @media (max-width: 640px) {
      .verse {
        top: 0.44rem;
        right: 0.62rem;
        font-size: 0.68rem;
      }

      .promise-banner {
        top: 1.88rem;
        width: min(calc(100vw - 1rem), 680px);
      }

      .promise-quote {
        min-height: 2rem;
        border-radius: 0.95rem;
        padding: 0.42rem 0.74rem;
        font-size: clamp(0.62rem, 2.25vw, 0.76rem);
        line-height: 1.3;
      }

      .scene-content {
        max-width: 460px;
        padding: 0 0.6rem;
      }

      .romantic-line {
        margin-bottom: 1.15rem;
        font-size: clamp(0.92rem, 4.5vw, 1.1rem);
      }

      .flowers-shell {
        gap: 0.5rem;
        padding-bottom: 0.1rem;
        transform: scale(0.9);
        transform-origin: center bottom;
      }

      .flower {
        width: clamp(100px, 28vw, 126px);
        height: clamp(182px, 33vh, 250px);
      }

      .button-wrap {
        margin-top: 1.4rem;
      }

      #missed-btn {
        padding: 0.54rem 1.1rem;
        font-size: 0.92rem;
      }

      #message-bubble {
        min-width: 172px;
        max-width: 84vw;
        font-size: 0.81rem;
        line-height: 1.35;
      }

      .lyrics-panel {
        bottom: 2.25rem;
        width: min(calc(100vw - 0.9rem), 560px);
        height: 3.3rem;
      }

      .lyrics-track {
        border-radius: 0.75rem;
      }

      .lyric-line {
        width: min(95%, 530px);
        font-size: clamp(0.82rem, 3.35vw, 1.05rem);
      }


      .botanical-floor {
        width: clamp(200px, 78vw, 300px);
        height: 72px;
        bottom: -2px;
      }

      .frond {
        width: calc(var(--fw, 72px) * 0.78);
        height: calc(var(--fh, 30px) * 0.78);
        bottom: 10px;
      }

      .base-leaf {
        width: 52px;
        height: 24px;
        bottom: 8px;
      }

      .mini-grass {
        height: calc(var(--h, 30px) * 0.76);
      }

      .grass-filler {
        width: calc(var(--fw, 10px) * 0.82);
        height: calc(var(--fh, 18px) * 0.78);
      }

      .sparkle-container {
        inset: -11% -8% 4% -8%;
      }

      .footer-sign {
        bottom: 0.7rem;
        font-size: 0.76rem;
        letter-spacing: 0.22em;
      }
    }

    @media (max-width: 420px) {
      .scene-content {
        max-width: 360px;
        padding: 0 0.45rem;
      }

      .promise-banner {
        top: 1.64rem;
        width: min(calc(100vw - 0.72rem), 480px);
      }

      .promise-quote {
        min-height: 1.84rem;
        border-radius: 0.8rem;
        padding: 0.36rem 0.58rem;
        font-size: clamp(0.57rem, 2.65vw, 0.68rem);
        line-height: 1.27;
      }

      .romantic-line {
        margin-bottom: 0.85rem;
      }

      .flowers-shell {
        gap: 0.32rem;
        transform: scale(0.78);
      }

      .button-wrap {
        margin-top: 0.85rem;
      }

      #missed-btn {
        padding: 0.46rem 0.92rem;
        font-size: 0.82rem;
      }

      #message-bubble {
        top: -0.1rem;
        min-width: 150px;
        font-size: 0.76rem;
        padding: 0.4rem 0.7rem;
      }

      .lyrics-panel {
        bottom: 2rem;
        width: min(calc(100vw - 0.68rem), 440px);
        height: 2.95rem;
      }

      .lyrics-track {
        border-radius: 0.65rem;
      }

      .lyric-line {
        width: min(96%, 420px);
        font-size: clamp(0.74rem, 3.8vw, 0.92rem);
      }


      .frond {
        width: calc(var(--fw, 72px) * 0.66);
        height: calc(var(--fh, 30px) * 0.66);
        bottom: 8px;
      }

      .grass-filler {
        width: calc(var(--fw, 10px) * 0.74);
        height: calc(var(--fh, 18px) * 0.66);
        bottom: 7px;
      }

      .sparkle-container {
        inset: -10% -6% 6% -6%;
      }

      .footer-sign {
        bottom: 0.5rem;
        font-size: 0.69rem;
        letter-spacing: 0.17em;
      }
    }

    @keyframes grow-flower-tree {
      0% {
        height: 0;
        border-radius: 2vmin;
      }
    }

    @keyframes blooming-flower {
      0% {
        transform: scale(0);
        opacity: 0;
      }
      100% {
        opacity: 1;
      }
    }

    @keyframes blooming-leaf-right {
      0% {
        transform-origin: left;
        transform: rotate(70deg) rotateY(30deg) scale(0);
      }
    }

    @keyframes blooming-leaf-left {
      0% {
        transform-origin: right;
        transform: rotate(-70deg) rotateY(30deg) scale(0);
      }
    }

    @keyframes moving-flower-1 {
      0%,
      100% {
        transform: rotate(2deg);
      }
      50% {
        transform: rotate(-2deg);
      }
    }

    @keyframes moving-flower-2 {
      0%,
      100% {
        transform: rotate(-8deg);
      }
      50% {
        transform: rotate(-12deg) rotateY(-6deg);
      }
    }

    @keyframes light-ans {
      0% {
        opacity: 0;
        transform: translateY(0);
      }
      25% {
        opacity: 1;
        transform: translateY(-10px) translateX(-4px);
      }
      60% {
        opacity: 1;
        transform: translateY(-34px) translateX(4px);
      }
      100% {
        opacity: 0;
        transform: translateY(-56px) translateX(0);
      }
    }

    @keyframes petalPulse {
      0%,
      100% {
        filter: saturate(1);
      }
      50% {
        filter: saturate(1.1) brightness(1.04);
      }
    }

    @keyframes petal-wind-sync {
      0%,
      100% {
        transform: translate(-50%, -50%)
          rotate(calc(var(--i) * var(--petal-angle, 22.5deg) - 1.1deg))
          translateY(calc(-1 * var(--petal-distance, 46px)));
      }
      50% {
        transform: translate(-50%, -50%)
          rotate(calc(var(--i) * var(--petal-angle, 22.5deg) + 1.1deg))
          translateY(calc(-1 * var(--petal-distance, 46px)));
      }
    }

    @keyframes shiny-rise {
      0% {
        opacity: 0;
        transform: translate3d(0, 0, 0) scale(0.65);
      }
      20% {
        opacity: 1;
        transform: translate3d(calc(var(--sparkle-drift, 0px) * 0.2), calc(-1 * var(--sparkle-rise, 88px) * 0.2), 0)
          scale(1);
      }
      65% {
        opacity: 0.88;
      }
      100% {
        opacity: 0;
        transform: translate3d(var(--sparkle-drift, 0px), calc(-1 * var(--sparkle-rise, 88px)), 0) scale(1.14);
      }
    }

    @keyframes twinkle {
      0%,
      100% {
        opacity: calc(var(--star-opacity, 0.7) * 0.4);
      }
      50% {
        opacity: var(--star-opacity, 0.7);
      }
    }

    @keyframes starDrift {
      from {
        transform: translateY(0) scale(1);
      }
      to {
        transform: translateY(-4px) scale(1.08);
      }
    }

    @keyframes meteorFly {
      0% {
        opacity: 0;
        transform: translate3d(0, 0, 0) rotate(var(--meteor-rotation, 45deg)) scaleX(1);
      }
      10% {
        opacity: 1;
      }
      100% {
        opacity: 0;
        transform: translate3d(var(--tx, 300px), var(--ty, 290px), 0)
          rotate(var(--meteor-rotation, 45deg)) scaleX(0.62);
      }
    }

    @keyframes bubbleFloat {
      0% {
        opacity: 0;
        transform: translate(-50%, 14px) scale(0.94);
      }
      18% {
        opacity: 1;
        transform: translate(-50%, -8px) scale(1);
      }
      70% {
        opacity: 1;
        transform: translate(-50%, -26px) scale(1);
      }
      100% {
        opacity: 0;
        transform: translate(-50%, -42px) scale(0.98);
      }
    }

    @keyframes lyricRiseOut {
      0% {
        opacity: 0.9;
        transform: translate(-50%, -50%);
      }
      100% {
        opacity: 0;
        transform: translate(-50%, -165%);
      }
    }

    @keyframes lyricActiveIn {
      0% {
        opacity: 0.28;
        transform: translate(-50%, -50%);
      }
      100% {
        opacity: 1;
        transform: translate(-50%, -50%);
      }
    }

    @keyframes promisePop {
      0% {
        opacity: 0.38;
        transform: translateY(8px) scale(0.975);
      }
      60% {
        opacity: 1;
        transform: translateY(0) scale(1.005);
      }
      100% {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    @keyframes promiseGlow {
      0%,
      100% {
        box-shadow:
          0 8px 20px rgba(7, 20, 54, 0.24),
          inset 0 0 16px rgba(255, 255, 255, 0.08);
      }
      50% {
        box-shadow:
          0 10px 24px rgba(8, 26, 66, 0.34),
          inset 0 0 18px rgba(255, 255, 255, 0.15);
      }
    }

    @keyframes promiseCaret {
      0%,
      49% {
        opacity: 1;
      }
      50%,
      100% {
        opacity: 0;
      }
    }

    @keyframes glowPulse {
      0% {
        filter: drop-shadow(0 0 8px rgba(255, 220, 120, 0.3));
      }
      50% {
        filter: drop-shadow(0 0 20px var(--glow-warm)) drop-shadow(0 0 24px var(--glow-cool));
      }
      100% {
        filter: drop-shadow(0 0 8px rgba(255, 220, 120, 0.28));
      }
    }

    @keyframes hazeFloat {
      0% {
        transform: translate3d(-1%, -1%, 0) scale(1);
      }
      100% {
        transform: translate3d(1.5%, 1%, 0) scale(1.05);
      }
    }

    @keyframes sceneBreathe {
      0%,
      100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-2px);
      }
    }

    @keyframes groundGlow {
      0%,
      100% {
        opacity: 0.7;
      }
      50% {
        opacity: 1;
      }
    }

    @keyframes grass-grow {
      0% {
        transform: rotate(var(--r, 0deg)) scaleY(0);
        opacity: 0;
      }
      100% {
        transform: rotate(var(--r, 0deg)) scaleY(1);
        opacity: 0.96;
      }
    }

    @keyframes grass-wind {
      0%,
      100% {
        transform: rotate(calc(var(--r, 0deg) - 1.6deg));
      }
      50% {
        transform: rotate(calc(var(--r, 0deg) + 1.6deg));
      }
    }

    @keyframes filler-grow {
      0% {
        transform: rotate(var(--fr, 0deg)) scaleY(0);
        opacity: 0;
      }
      100% {
        transform: rotate(var(--fr, 0deg)) scaleY(1);
        opacity: var(--fo, 0.84);
      }
    }

    @keyframes filler-sway {
      0%,
      100% {
        transform: rotate(calc(var(--fr, 0deg) - 2.2deg));
      }
      50% {
        transform: rotate(calc(var(--fr, 0deg) + 2.2deg));
      }
    }

    @keyframes frond-grow {
      0% {
        transform: rotate(var(--fa, 0deg)) scaleX(var(--ff, 1)) scaleY(0);
        opacity: 0;
      }
      100% {
        transform: rotate(var(--fa, 0deg)) scaleX(var(--ff, 1)) scaleY(1);
        opacity: 0.75;
      }
    }

    @keyframes frond-wind {
      0%,
      100% {
        transform: rotate(calc(var(--fa, 0deg) - 1.7deg)) scaleX(var(--ff, 1));
      }
      50% {
        transform: rotate(calc(var(--fa, 0deg) + 1.7deg)) scaleX(var(--ff, 1));
      }
    }

    @keyframes leaf-ground-breathe {
      0%,
      100% {
        filter: brightness(1);
      }
      50% {
        filter: brightness(1.08);
      }
    }

    @keyframes leaf-ground-sway {
      0%,
      100% {
        transform: rotate(calc(var(--leaf-angle, 0deg) - 1.5deg)) scaleX(var(--leaf-flip, 1));
      }
      50% {
        transform: rotate(calc(var(--leaf-angle, 0deg) + 1.5deg)) scaleX(var(--leaf-flip, 1));
      }
    }
